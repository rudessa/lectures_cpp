# –õ–µ–∫—Ü–∏—è 11. Copy elision, move —Å–µ–º–∞–Ω—Ç–∏–∫–∞ ‚Äî 18.02.2022

<aside>
üí° –û—Å–Ω–æ–≤–Ω–∞—è –∏–¥–µ—è - —Å–ø–æ—Å–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
</aside>

–ü–æ–ø—Ä–æ–±—É–µ–º –Ω–∞–ø–∏—Å–∞—Ç—å —Å–≤–æ–π —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –∫–ª–∞—Å—Å **String**

```cpp
#include <iostream>

class String {
public:
		String() {

				// –õ–æ–≥–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –±—ã–ª–æ –ø–æ–Ω—è—Ç–Ω–æ –ø—Ä–æ–∏—Å—Ö–æ–¥—è—â–µ–µ

				std::cout << "String()" << std::endl;

		}

		String(const char* str) {

				// –õ–æ–≥–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –±—ã–ª–æ –ø–æ–Ω—è—Ç–Ω–æ –ø—Ä–æ–∏—Å—Ö–æ–¥—è—â–µ–µ

				std::cout << "String(const char* str)" << std::endl;

				size_ == std::strlen(str); // —Ñ—É–Ω–∫—Ü–∏—è std::strlen - –±–µ–∂–∏—Ç –ø–æ —Å—Ç—Ä–æ–∫–µ, –Ω–∞—Ö–æ–¥–∏—Ç —Ç–µ—Ä–º–∏–Ω–∞—Ç–æ—Ä C-—Å—Ç—Ä–æ–∫–∏ –∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ —ç—Ç–æ–≥–æ –≤—ã–≤–æ–¥–∏—Ç –¥–ª–∏–Ω–Ω—É
				data_ = new char[size_];
				std::memcpy(data_, str, size_);

		}

		String(const String& other) {

				// –õ–æ–≥–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –±—ã–ª–æ –ø–æ–Ω—è—Ç–Ω–æ –ø—Ä–æ–∏—Å—Ö–æ–¥—è—â–µ–µ
				std::cout << "String(const String& other)" << std::endl;

				data_ = new char[other.size_];
				size_ = other.size_;
				std::memcpy(data_, other.data_, size_); // std::memcpy - —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è. –°–∏–≥–Ω–∞—Ç—É—Ä–∞ (–∫—É–¥–∞, –æ—Ç–∫—É–¥–∞, —Ä–∞–∑–º–µ—Ä)
		}

		~String() {

				// –õ–æ–≥–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –±—ã–ª–æ –ø–æ–Ω—è—Ç–Ω–æ –ø—Ä–æ–∏—Å—Ö–æ–¥—è—â–µ–µ

				std::cout << "~String()" << std::endl;

				delete[] data_;
		}

		// –î–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –¥–µ–±–∞–≥–∞ –æ–ø—Ä–µ–¥–µ–ª–∏–º –æ–ø–µ—Ä–∞—Ç–æ—Ä –≤—ã–≤–æ–¥–∞ –≤ –ø–æ—Ç–æ–∫
		friend std::ostream& operator << (std::ostream& stream, const String& str) {

				// –ù—É–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å —Ä–∞–∑–º–µ—Ä, –ø–æ—Ç–æ–º—É —á—Ç–æ –≤ –°-—Å—Ç—Ä–æ–∫–∞—Ö –≤ –∫–æ–Ω—Ü–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π —Å–∏–º–≤–æ–ª ( —Ç–µ—Ä–º–∏–Ω–∞—Ç–æ—Ä ) —Å—Ç—Ä–æ–∫–∏ - \0. –í –Ω–∞—à–µ–º –º–∞—Å—Å–∏–≤–µ **data_** —Ç–∞–∫–æ–≥–æ —Å–∏–º–≤–æ–ª–∞ –≤ –∫–æ–Ω—Ü–µ —Å—Ç—Ä–æ–∫–∏ –Ω–µ—Ç
				// –ü–æ—ç—Ç–æ–º—É –µ—Å–ª–∏ –ø—Ä–æ—Å—Ç–æ –±—É–¥–µ–º –ø–µ—á–∞—Ç–∞—Ç—å **char*** , —Ç–æ –Ω–µ –≤—Å—Ç—Ä–µ—Ç–∏–≤ —Ç–∞–∫–æ–π —Å–∏–º–≤–æ–ª –≤ –∫–æ–Ω—Ü–µ, –≤—ã–≤–æ–¥ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—Å—è –¥–æ —Ç–µ—Ö –ø–æ—Ä –ø–æ–∫–∞ –Ω–µ –≤—Å—Ç—Ä–µ—Ç–∏—Ç—Å—è —è—á–µ–π–∫–∞ –ø–∞–º—è—Ç–∏, –≤ –∫–æ—Ç–æ—Ä–æ–π –±—É–¥–µ—Ç –∑–∞–ø–∏—Å–∞–Ω —ç—Ç–æ—Ç —Ç–µ—Ä–º–∏–Ω–∞—Ä.
				// –û—á–µ–≤–∏–¥–Ω–æ, —á—Ç–æ –≤—ã–≤–æ–¥ –º–æ–∂–µ—Ç –≤–æ–æ–±—â–µ –Ω–µ –∑–∞–∫–æ–Ω—á–∏—Ç—å—Å—è ( –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –æ–±–ª–∞—Å—Ç–∏ –ø–∞–º—è—Ç–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞ ) –∏–ª–∏ –µ—Å–ª–∏ –∑–∞–∫–æ–Ω—á–∏—Ç—Å—è, —Ç–æ –≤—Å—ë-—Ä–∞–≤–Ω–æ –±—É–¥–µ—Ç –≤—ã–≤–µ–¥–µ–Ω –º—É—Å–æ—Ä

				return stream << std::string(str.data_, str.size_) << std::endl; 
		}

private:
		char* data_ = null;
		size_t size_ = 0;
};

int main() {
		String str("Hello");

		std::cout << str << std::endl;

		return 0;
}
```

–í—ã–≤–æ–¥ –±—É–¥–µ—Ç :

```cpp
String(const char* str)
Hello

~String()
```

 –î–æ–±–∞–≤–∏–º –∂–µ —Ç–µ–ø–µ—Ä—å —Ñ—É–Ω–∫—Ü–∏—é `MakeString(cosnt char* str)` –∏ –∏–∑–º–µ–Ω–∏–º `main()`

```cpp
String MakeString(const char* str) {
		return String(str); // RVO
}

int main() {

		std::cout << MakeString("Hello") << std::endl;

		return 0;
}
```

–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥

```cpp
String(const char* str)
String(const String& other) // –ü—Ä–∏ –≤–æ–∑–≤—Ä–∞—Ç–µ –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏ MakeString –º—ã –∫–æ–ø–∏—Ä—É–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
~String() // –î–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä —Å—Ç—Ä–æ–∫–∏, —Å–æ–∑–¥–∞–Ω–Ω–æ–π –≤–Ω—É—Ç—Ä–∏ MakeString

Hello

~String() // –î–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä —Å—Ç—Ä–æ–∫–∏, –∫–æ—Ç–æ—Ä—É—é –≤–µ—Ä–Ω—É–ª–∞ —Ñ—É–Ω–∫—Ü–∏—è MakeString
```

–ù–æ –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –Ω–∏—á–µ–≥–æ –Ω–µ –∏–∑–º–µ–Ω–∏—Ç—Å—è

# Return value optimization

–¢–∞–∫ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç, –ø–æ—Ç–æ–º—É —á—Ç–æ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –º–µ—Ö–∞–Ω–∏–∑–º **copy elision**. –í –Ω—ë–º –µ—Å—Ç—å **return value optimization (RVO)**. –ï—Å–ª–∏ –≤ –≤—ã—Ä–∞–∂–µ–Ω–∏–∏ **return** —Å–æ–∑–¥–∞—ë—Ç—Å—è –≤—Ä–µ–º–µ–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç —Ç–æ–≥–æ –∂–µ —Ç–∏–ø–∞, —á—Ç–æ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏–µ–π ( –∑–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ–º –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–Ω–æ—Å—Ç–∏ –∏ –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏, –ø—Ä–∏ –∏—Ö –Ω–∞–ª–∏—á–∏–∏ –º–µ—Ö–∞–Ω–∏–∑–º RVO —Ç–∞–∫–∂–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è ), —Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç—Å—è, —á—Ç–æ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä –∏–∑–±–µ–∂–∏—Ç –ª–∏—à–Ω–µ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ. –≠—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç –∑–∞ —Å—á—ë—Ç —Ç–æ–≥–æ, —á—Ç–æ return-–æ–±—ä–µ–∫—Ç —Å—Ä–∞–∑—É —Å–æ–∑–¥–∞—Å—Ç—Å—è –≤ —Å—Ç–µ–∫-—Ñ—Ä–µ–π–º–µ –≤—ã–∑—ã–≤–∞—é—â–µ–π —Ñ—É–Ω–∫—Ü–∏–∏, –∞ –Ω–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π. –í –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ –æ–±—ä–µ–∫—Ç —Å–æ–∑–¥–∞—Å—Ç—Å—è –≤ —Å—Ç–µ–∫-—Ñ—Ä–µ–π–º–µ `main()` , –∞ –Ω–µ –≤ —Å—Ç–µ–∫-—Ñ—Ä–µ–π–º–µ `MakeString()`.

–ï—Å–ª–∏ —Å–¥–µ–ª–∞—Ç—å –æ–±—ä–µ–∫—Ç –Ω–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–º, –∞ –≤–ø–æ–ª–Ω–µ —Å–µ–±–µ –Ω–∞—Å—Ç–æ—è—â–∏–º

```cpp
String MakeString(const char* str) {
		String string(str);
		return string; // NRVO
}
```

–¢–æ –≤—ã–≤–æ–¥ —Ç–∞–∫–∂–µ –Ω–µ –∏–∑–º–µ–Ω–∏—Ç—Å—è, –ø–æ—Ç–æ–º—É —á—Ç–æ —Ç–µ–ø–µ—Ä—å –ø—Ä–∏–º–µ–Ω–∏—Ç—Å—è –º–µ—Ö–∞–Ω–∏–∑–º **named RVO** (NRVO). –ì–∞—Ä–∞–Ω—Ç–∏–π 100% –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è NRVO –∫ –ø–æ–¥–æ–±–Ω—ã–º –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –Ω–µ—Ç, –Ω–æ –≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä, –æ–Ω —Å—Ä–∞–±–æ—Ç–∞–ª.

<aside>
üí° –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–æ–≤ —É–º–µ—é—Ç –≤ NRVO. –¢–æ, –Ω–∞—Å–∫–æ–ª—å–∫–æ –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–æ –±—É–¥–µ—Ç –ø—Ä–∏–º–µ–Ω—è—Ç—å—Å—è NRVO –∏–ª–∏ –¥—Ä—É–≥–∏–µ –ø–æ–¥–æ–±–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–æ–º, –∑–∞–≤–∏—Å–∏—Ç —Ç–∞–∫–∂–µ –æ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏. –¢–∞–∫ –ø—Ä–∏ –¥–µ–±–∞–≥–µ NRVO –º–æ–∂–µ—Ç –Ω–µ –ø—Ä–∏–º–µ–Ω—è—Ç—å—Å—è, –∞ –≤ —Ä–µ–ª–∏–∑–µ –ø—Ä–∏–º–µ–Ω—è—Ç—å—Å—è

</aside>

–ê–Ω–∞–ª–æ–≥–∏—á–Ω—ã–º –æ–±—Ä–∞–∑–æ–º —Å—Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –∫–æ–¥

```cpp
void PrintString(String string) {
		std::cout << string << std::endl;
}

int main() {

		PrintString(String("Hello"));
		
		return 0;

}
```

# Move —Å–µ–º–∞–Ω—Ç–∏–∫–∞

–ï—Å–ª–∏ –∫–æ–¥ –±—É–¥–µ—Ç —Ç–∞–∫–∏–º :

```cpp
int main() {

		String str("Hello");
		PrintString(str);
		
		return 0;

}
```

–¢—É—Ç —É–∂–µ –ø–æ–ª—É—á–∏–º –≤–∞—Ä–∏–∞–Ω—Ç –±–µ–∑ RVO

```cpp
String(const char* str)
String(const String& other) // –ü–µ—Ä–µ–¥–∞—ë–º –≤ PrintString –∫–æ–ø–∏—é –ø–æ –∑–Ω–∞—á–µ–Ω–∏—é
Hello

~String() // –î–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä —Å—Ç—Ä–æ–∫–∏, —Å–æ–∑–¥–∞–Ω–Ω–æ–π –≤–Ω—É—Ç—Ä–∏ PrintString
~String() // –î–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä str –∏–∑ main()
```

–ù–∞—á–∏–Ω–∞—è —Å –°++11 –ø–æ—è–≤–∏–ª–∞—Å—å **move —Å–µ–º–∞–Ω—Ç–∏–∫–∞**. –ï—ë –æ—Å–Ω–æ–≤–Ω–∞—è –∏–¥–µ—è –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Å–ª–µ–¥—É—é—â–µ–º : –ø—É—Å—Ç—å –Ω–∞–º –Ω—É–∂–Ω–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –æ–±—ä–µ–∫—Ç, –ø—Ä–∏ —ç—Ç–æ–º –∫–æ–ø–∏—Ä—É–µ–º—ã–π –æ–±—ä–µ–∫—Ç –Ω–∞–º –±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–µ–Ω. –¢–æ–≥–¥–∞ –≤–º–µ—Å—Ç–æ **deep-copy** –≤—Å–µ—Ö –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –ø–æ–ª–µ–π ( –∫–∞–∫ –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è ) –º—ã –º–æ–∂–µ–º –ø—Ä–æ—Å—Ç–æ –≤–∑—è—Ç—å –∏ ‚Äú—É–∫—Ä–∞—Å—Ç—å‚Äù –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –ø–æ–ª—è –∫–æ–ø–∏—Ä—É–µ–º–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞. –û—á–µ–≤–∏–¥–Ω–æ, —á—Ç–æ –æ–±—ã—á–Ω–æ —ç—Ç–æ –¥—ë—à–µ–≤–æ. –ù–∞–ø—Ä–∏–º–µ—Ä –≤ –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —É–∫–∞–∑–∞—Ç–µ–ª–∏.

## Move –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä

–¢–∞–∫–∞—è —Å–µ–º–∞–Ω—Ç–∏–∫–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Å –ø–æ–º–æ—â—å—é **move –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞**. –¢–∞–∫–æ–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—É—é **RValue** —Å—Å—ã–ª–∫—É ( –æ–±–æ–∑–Ω–∞—á–∞–µ—Ç—Å—è –∫–∞–∫ `T&& other` )

```cpp
// move - –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä. –ü—Ä–∏–Ω–∏–º–∞–µ—Ç RValue —Å—Å—ã–ª–∫—É
String(String&& other) {

		std::cout << "String(String&& other)" << std::endl;

		data_ = other.data_;
		size = other.size_;

		// –ù–æ —á—Ç–æ–±—ã –ø—Ä–∏ –≤—ã–∑–æ–≤–µ –¥–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ other –Ω–µ –ø–æ—Ç–µ—Ä—è–ª–∏—Å—å –¥–∞–Ω–Ω—ã–µ, –Ω—É–∂–Ω–æ –ø—Ä–µ–¥–ø—Ä–∏–Ω—è—Ç—å –∫–∞–∫–∏–µ-—Ç–æ —à–∞–≥–∏. –ù–∞–ø—Ä–∏–º–µ—Ä :
		other.data_ = nullptr;
		other.size_ = 0; // –æ—Å–æ–±–æ –Ω–∏ –Ω–∞ —á—Ç–æ –Ω–µ –≤–ª–∏—è–µ—Ç, –Ω–æ –∑–∞—Ç–æ –∫—Ä–∞—Å–∏–≤–æ :)
}
```

–î–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞, –Ω–∞–ø–∏—à–µ–º –æ–ø–µ—Ä–∞—Ç–æ—Ä +

```cpp
String operator+(const String& other) {

		String result;

		result.size = size_ + other.size_;
		result.data_ = new char[result.size_];

		std::memcpy(result.data_, data_, size_);
		std::memcpy(result.data_ + size_, other.data_, other.size_);
		
		return result;
}
```

–¢–µ–ø–µ—Ä—å –ø—Ä–∏ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–∏ `main()`

```cpp
int main() {

		String str1("Hello");
		String str2(" world");

		PrintString(str1 + str2);
		
		return 0;

}
```

–ø–æ–ª—É—á–∏–º

```cpp
String(const char* str) // –°–æ–∑–¥–∞–Ω–∏–µ str1
String(const char* str) // –°–æ–∑–¥–∞–Ω–∏–µ str2
String() // –û–±—ä–µ–∫—Ç, —Å–æ–∑–¥–∞–Ω–Ω—ã–π –≤–Ω—É—Ç—Ä–∏ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ +
Hello world // –í—ã–≤–æ–¥ —Å—Ç—Ä–æ–∫–∏. –ó–∞–º–µ—Ç–∏–º, —á—Ç–æ –≤ PrintString —Ç–∞–∫–∂–µ –ø—Ä–∏–º–µ–Ω–∏–ª—Å—è RVO

~String() // –î–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä —Å—Ç—Ä–æ–∫–∏, –ø–æ–ª—É—á–µ–Ω–Ω–æ–π –ø—Ä–∏ —Å–ª–æ–∂–µ–Ω–∏–∏
~String() // –î–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä str2
~String() // –î–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä str1
```

–ó–∞–º–µ—Ç–∏–º, —á—Ç–æ —Ç—É—Ç –Ω–µ—Ç move-–∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞, —Ç–∞–∫ –∫–∞–∫ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä —Å–ª–∏—à–∫–æ–º —É–º–Ω—ã–π –∏ –ø—Ä–∏–º–µ–Ω–∏–ª RVO. –ß—Ç–æ–±—ã –ø—Ä–æ–¥–µ–º–æ–Ω—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –µ–≥–æ –≤—ã–∑–æ–≤, –≤–æ—Å–ø–æ–ª—å–∑—É–µ–º—Å—è —Ñ—É–Ω–∫—Ü–∏–µ–π `std::move`

```cpp
int main() {

		String str1("Hello");
		String str2(" world");

		// –≤–∞–ª–∏–¥–Ω–æ –±—ã–ª–æ –±—ã –Ω–∞–ø–∏—Å–∞—Ç—å –∏
		// String str = std::move(str1);
		String str(std::move(str1));
		
		return 0;

}
```

–∏ –ø–æ–ª—É—á–∏–º –≤—ã–≤–æ–¥

```cpp
String(const char* str) // –°–æ–∑–¥–∞–Ω–∏–µ str1
String(const char* str) // –°–æ–∑–¥–∞–Ω–∏–µ str2
String str(String&& other) // –°–æ–∑–¥–∞–Ω–∏–µ str

~String() // –î–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä str
~String() // –î–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä str2
~String() // –î–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä str1
```

<aside>
üí° –§—É–Ω–∫—Ü–∏—è `std::move` –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –Ω–∏–∫–∞–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π —Å –ø–∞–º—è—Ç—å—é. –ï—ë –º–æ–∂–Ω–æ –≤–æ—Å–ø—Ä–∏–Ω–∏–º–∞—Ç—å –∫–∞–∫ –Ω–µ–∫–æ—Ç–æ—Ä—ã–π **cast** –∫ **RValue** —Å—Å—ã–ª–∫–µ (`T&& other`) –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã —è–≤–Ω–æ –≤—ã–∑–≤–∞—Ç—å **move** –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä. –û—á–µ–≤–∏–¥–Ω–æ, —á—Ç–æ –≤—ã–∑–≤–∞–≤ –µ–≥–æ –º—ã –∫–∞–∫ –±—ã –∑–∞—è–≤–ª—è–µ–º –æ —Ç–æ–º, —á—Ç–æ –¥–∞–ª—å—à–µ —ç—Ç–æ—Ç –æ–±—ä–µ–∫—Ç –Ω–µ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è.

</aside>

## Move assign

–ö—Ä–æ–º–µ —Ç–æ–≥–æ, **move** —Å–µ–º–∞–Ω—Ç–∏–∫–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Å –ø–æ–º–æ—â—å—é –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏—è, –ø—Ä–∏–Ω–∏–º–∞—é—â–µ–≥–æ **RValue** —Å—Å—ã–ª–∫—É. –°—Ä–∞–≤–Ω–∏–º –æ–±—ã—á–Ω–æ–µ –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ –∏ **RValue** –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏

```cpp
// –û–±—ã—á–Ω—ã–π –æ–ø–µ—Ä–∞—Ç–æ—Ä –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏—è
String& operator=(const String& other) {
		std::cout << "operator=(const String& other)" << std::endl;

		if (this == &other) {
				return *this;
		}

		// –ü–ª–æ—Ö–æ–π –≤–∞—Ä–∏–∞–Ω—Ç
		// –ï—Å–ª–∏ –Ω–µ –ø–æ–ª—É—á–∏—Ç—Å—è –≤—ã–¥–µ–ª–∏—Ç—å –ø–∞–º—è—Ç—å, —Ç—É—Ç –º–æ–∂–µ—Ç –≤—ã–±—Ä–æ—Å–∏—Ç—å—Å—è **bad_alloc** –∏ —Ç–æ–≥–¥–∞ –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç –Ω–µ—Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω–æ ( –ø–æ—Ç–æ–º—É —á—Ç–æ —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ —É–∂–µ —É–¥–∞–ª–µ–Ω—ã )
		// delete[] data_;
		// data_ = new char[other.size_];

		// –•–æ—Ä–æ—à–∏–π –≤–∞—Ä–∏–∞–Ω—Ç
		char* tmp = new char[other.size_]

		delete[] data_;
		data_ = tmp;
****
		size_ = other.size_;
		std::memcpy(data_, other.data_, size_); // std::memcpy - —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è. –°–∏–≥–Ω–∞—Ç—É—Ä–∞ (–∫—É–¥–∞, –æ—Ç–∫—É–¥–∞, —Ä–∞–∑–º–µ—Ä)

		return *this;
}
```

–ö–æ–¥

```cpp
int main() {

		String str1("Hello");
		String str2(" world");

		str2 = str1

		std::cout << str2 << std::endl;
		
		return 0;

}
```

–≤—ã–≤–µ–¥–µ—Ç

```cpp
String(const char* str) // –°–æ–∑–¥–∞–Ω–∏–µ str1
String(const char* str) // –°–æ–∑–¥–∞–Ω–∏–µ str2
operator=(const String& other)
Hello

~String() // –î–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä str2
~String() // –î–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä str1
```

<aside>
üí° –ü–æ—Ä—è–¥–æ–∫ –≤—ã–∑–æ–≤–∞ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–æ–≤ –∏ –¥–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä–æ–≤ –º–æ–∂–Ω–æ –æ—Ç—Å–ª–µ–¥–∏—Ç—å –¥–æ–±–∞–≤–∏–≤ –∫ –≤—ã–≤–æ–¥—É —Å—Å—ã–ª–∫—É, –Ω–∞–ø—Ä–∏–º–µ—Ä :

```cpp
		~String() {

				std::cout << "~String()" << this << std::endl;

				delete[] data_;
		}
```

</aside>

**RValue** –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ

```cpp
String& operator=(String&& other) {
		std::cout << "operator=(String&& other)" << std::endl;

		if (this == &other) {
				return *this;
		}

		delete[] data_;

		data_ = other.data_;
		size = other.size_;

		// –ù–æ —á—Ç–æ–±—ã –ø—Ä–∏ –≤—ã–∑–æ–≤–µ –¥–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ other –Ω–µ –ø–æ—Ç–µ—Ä—è–ª–∏—Å—å –¥–∞–Ω–Ω—ã–µ, –Ω—É–∂–Ω–æ –ø—Ä–µ–¥–ø—Ä–∏–Ω—è—Ç—å –∫–∞–∫–∏–µ-—Ç–æ —à–∞–≥–∏. –ù–∞–ø—Ä–∏–º–µ—Ä :
		other.data_ = nullptr;
		other.size_ = 0; // –æ—Å–æ–±–æ –Ω–∏ –Ω–∞ —á—Ç–æ –Ω–µ –≤–ª–∏—è–µ—Ç, –Ω–æ –∑–∞—Ç–æ –∫—Ä–∞—Å–∏–≤–æ :)

		retrun *this;
}
```

–¢–µ–ø–µ—Ä—å

```cpp
int main() {

		String str1("Hello");
		String str2(" world");

		str2 = std::move(str1);

		std::cout << str2 << std::endl;
		std::cout << str1 << std::endl;
		
		return 0;

}
```

–≤—ã–≤–µ–¥–µ—Ç

```bash
String(const char* str) // –°–æ–∑–¥–∞–Ω–∏–µ str1
String(const char* str) // –°–æ–∑–¥–∞–Ω–∏–µ str2
operator=(String&& other)
Hello

// –æ—Ç–º–µ—Ç–∏–º, —á—Ç–æ str1 –Ω–µ —Ä–∞—Å–ø–µ—á–∞—Ç–∞–ª—Å—è ( —Ç–æ—á–Ω–µ–µ —Ä–∞—Å–ø–µ—á–∞—Ç–∞–ª–æ—Å—å **–Ω–∏—á–µ–≥–æ** ), –ø–æ—Ç–æ–º—É —á—Ç–æ –µ–≥–æ –¥–∞–Ω–Ω—ã–µ –±—ã–ª–∏ —É–¥–∞–ª–µ–Ω—ã

~String() // –î–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä str2
~String() // –î–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä str1
```

## Sw–∞p –∏–¥–∏–æ–º–∞

–¢–∞–∫ –∫–∞–∫ –ø–æ–ª–µ–π –≤ **RValue** –æ–±—ä–µ–∫—Ç–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –º–Ω–æ–≥–æ, –∏ –Ω–∞–¥–æ –æ—á–∏—â–∞—Ç—å –∏—Ö –∏ –≤ **move**-–∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ –∏ –≤ **move** –æ–ø–µ—Ä–∞—Ç–æ—Ä–µ –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏—è, —Ç–æ –º–æ–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ –ø–æ–º–µ–Ω—è—Ç—å –º–µ—Å—Ç–∞–º–∏ –ø–æ–ª—è. –¢–æ–≥–¥–∞ –ø–æ—Å–ª–µ –æ–±–º–µ–Ω–∞, –ø—Ä–∏ –≤—ã–∑–æ–≤–µ –¥–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ **RValue** –æ–±—ä–µ–∫—Ç–∞ –æ—á–∏—Å—Ç—è—Ç—Å—è —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ

```cpp
String& operator=(String&& other) {
		std::cout << "operator=(String&& other)" << std::endl;

		// –û—Ç–º–µ—Ç–∏–º, —á—Ç–æ —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å —Å —Å–∞–º–∏–º —Å–æ–±–æ–π –æ–±—ä–µ–∫—Ç —Ç–µ–ø–µ—Ä—å –Ω–µ –Ω–∞–¥–æ, –ø–æ—Ç–æ–º—É —á—Ç–æ —ç—Ç–æ –∑–∞–ª–æ–∂–µ–Ω–æ –≤ —Ñ—É–Ω–∫—Ü–∏—é swap
		std::swap(data_, other.data_);
		std::swap(size_, other.size_);

		retrun *this;
}
```

<aside>
üí° –í–∞–∂–Ω—ã–π –º–æ–º–µ–Ω—Ç, —á—Ç–æ –≤—Ä–µ–º—è –≤—ã–∑–æ–≤–∞ –¥–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ **RValue** –æ–±—ä–µ–∫—Ç–∞ –Ω–µ –æ—Å–æ–±–æ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–æ. –ü–æ—ç—Ç–æ–º—É –ø–∞–º—è—Ç—å –±—É–¥–µ—Ç –æ—á–∏—â–µ–Ω–∞ –Ω–µ —Å—Ä–∞–∑—É

</aside>

## –ö–∞–∫–∏–µ –æ–±—ä–µ–∫—Ç—ã –º–æ–≥—É—Ç—å –±–∏–Ω–¥–∏—Ç—å—Å—è –∫ RValue ?

<aside>
üí° –°—Ç—Ä–æ–≥–æ –≥–æ–≤–æ—Ä—è –Ω—É–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å—Ç–∞—Ç—å—é –ø—Ä–æ —Å—Å—ã–ª–∫–∏ –Ω–∞ cppreference.com

</aside>

–ù–æ –≤–æ–æ–±—â–µ –±–∏–Ω–¥—è—Ç—Å—è

1. –û–±—ä–µ–∫—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –ø–µ—Ä–µ—Å—Ç–∞–Ω—É—Ç —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å –ø–æ—Å–ª–µ –≤—ã–∑–æ–≤–∞ —Å—Ç—Ä–æ—á–∫–∏
2. –û–±—ä–µ–∫—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ —è–≤–Ω–æ –∑–∞–∫–∞—Å—Ç–∏–ª–∏ —Å –ø–æ–º–æ—â—å—é `std::move`

## –•–∞–∫ ( –ø–∞—Ç—Ç–µ—Ä–Ω )

–ï—Å–ª–∏ –∂–µ —É–±–µ—Ä—ë–º **move** –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ, —Ç–æ –∫–æ–¥ –Ω–∏–∂–µ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ –≤–∞—Ä–∏–∞–Ω—Ç—É —Å **move** –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ–º

```cpp
String& operator=(String other) {
		std::cout << "operator=(String other)" << std::endl;

		// –û—Ç–º–µ—Ç–∏–º, —á—Ç–æ —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å —Å —Å–∞–º–∏–º —Å–æ–±–æ–π –æ–±—ä–µ–∫—Ç —Ç–µ–ø–µ—Ä—å –Ω–µ –Ω–∞–¥–æ, –ø–æ—Ç–æ–º—É —á—Ç–æ —ç—Ç–æ –∑–∞–ª–æ–∂–µ–Ω–æ –≤ —Ñ—É–Ω–∫—Ü–∏—é swap
		std::swap(data_, other.data_);
		std::swap(size_, other.size_);

		retrun *this;
}
```

–≠—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–∑-–∑–∞ —Ç–æ–≥–æ, —á—Ç–æ –æ–±—ä–µ–∫—Ç, –∫ –∫–æ—Ç–æ—Ä–æ–º—É –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ–º - –≤—Ä–µ–º–µ–Ω–Ω—ã–π, –∏ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∏–¥–∏–æ–º–∞ **copy-and-swap, –∫**–æ–≥–¥–∞ —Å–Ω–∞—á–∞–ª–∞ —Å –ø–æ–º–æ—â—å—é **move**-–∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ —Å–æ–∑–¥–∞—ë—Ç—Å—è –≤—Ä–µ–º–µ–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç ( –≤ –∫–æ—Ç–æ—Ä–æ–º –ø–æ–ª—è - –ø–æ–ª—è –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ ), –∞ –∑–∞—Ç–µ–º —Å –ø–æ–º–æ—â—å—é **swap** –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –æ–±–º–µ–Ω.

## –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è move

–î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —á–∞—Å—Ç–æ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä —Å–∞–º –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç **move**-–∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä. –ß—Ç–æ–±—ã —ç—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ –Ω—É–∂–Ω–æ :

1. –ù–µ –±—ã–ª–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö **copy**-–∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–æ–≤ ( —Å—á–∏—Ç–∞–µ—Ç—Å—è, —á—Ç–æ —Ä–∞–∑ –º—ã —Ö–æ—Ç–∏–º –∫–∞—Å—Ç–æ–º–Ω—ã–π **copy**, –∑–Ω–∞—á–∏—Ç —á—Ç–æ-—Ç–æ —Ç—É—Ç –Ω–µ —á–∏—Å—Ç–æ –∏ **move**-–∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π –º—ã –Ω–µ –∑–∞—Ö–æ—Ç–∏–º )
2. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø–µ—Ä–∞—Ç–æ—Ä –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏—è
3. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ **move**-–ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ
4. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –¥–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä
    
    <aside>
    üí° –ü–æ—Ç–æ–º—É —á—Ç–æ **move** –Ω–µ –≤—Å–µ–≥–¥–∞ –æ–∑–Ω–∞—á–∞–µ—Ç —Ç–æ, —á—Ç–æ –æ–ø–∏—Å–∞–Ω–æ –≤—ã—à–µ. –ù–∞–ø—Ä–∏–º–µ—Ä –¥–ª—è –ø—Ä–∏–º–∏—Ç–∏–≤–Ω—ã—Ö —Ç–∏–ø–æ–≤ **move** –º–æ–∂–µ—Ç —Å–æ—Å–ª–∞—Ç—å—Å—è –Ω–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ
    
    </aside>
    
5. –ï—Å–ª–∏ –≤ –∫–ª–∞—Å—Å–µ –µ—Å—Ç—å –ø–æ–ª—è, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –º–æ–≥—É—Ç –±—ã—Ç—å **move**, —Ç–æ –∏ –≤–µ—Å—å –∫–ª–∞—Å—Å –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å **move** –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–æ–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

<aside>
üí° –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ –∏ –¥–ª—è **move**-–ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏—è, –Ω–æ –≤–º–µ—Å—Ç–æ –ø—É–Ω–∫—Ç–∞ 3 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π **move**-–∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä

</aside>

# –ü—Ä–æ `std::unique_ptr`

–ö–æ–¥ –Ω–∏–∂–µ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç 

```cpp
std::unique_ptr<String> ptr = std::make_unique<String>();
std::unique_ptr<String> ptr2 = ptr;
```

–ü–æ—Ç–æ–º—É —á—Ç–æ –≤ `std::unique_ptr` —É–¥–∞–ª—ë–Ω –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è. –ï—Å–ª–∏ –±—ã –º–æ–∂–Ω–æ –±—ã–ª–æ –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å, —Ç–æ –æ—Å—Ç–∞–ª–∏—Å—å –±—ã –≤ —Å–∏—Ç—É–∞—Ü–∏–∏, –∫–æ–≥–¥–∞ –¥–≤–∞ —Ä–∞–∑–Ω—ã—Ö `std::unique_ptr` —É–∫–∞–∑—ã–≤–∞—é—Ç –Ω–∞ –æ–¥–Ω—É –∏ —Ç—É –∂–µ –æ–±–ª–∞—Å—Ç—å –ø–∞–º—è—Ç–∏.

–¢–æ–≥–¥–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∫–∞–∫–æ–≥–æ-—Ç–æ –∏–∑ –Ω–∏—Ö –≤—ã–∑–≤–∞–ª–æ—Å—å –±—ã –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ –æ–±–ª–∞—Å—Ç–∏ –ø–∞–º—è—Ç–∏ –Ω–∞ –∫–æ—Ç–æ—Ä—É—é –æ–Ω–∏ —Å—Å—ã–ª–∞—é—Ç—Å—è, –∏ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –≤—Ç–æ—Ä–æ–≥–æ, —Ç–∞–∫–∂–µ –ø—Ä–æ–∏–∑–æ—à–ª–∞ –ø–æ–ø—ã—Ç–∫–∞ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è –ø–∞–º—è—Ç–∏, –∫–æ—Ç–æ—Ä–∞—è –±—ã–ª–∞ —É–∂–µ –æ—á–∏—â–µ–Ω–∞ –ø–µ—Ä–≤—ã–º `std::unique_ptr` ( –∏–ª–∏ —á—Ç–æ –µ—â—ë —Ö—É–∂–µ, –ø–æ–ø—ã—Ç–∞–ª–∏—Å—å –±—ã —Ä–∞–±–æ—Ç–∞—Ç—å —Å —ç—Ç–æ–π –æ–±–ª–∞—Å—Ç—å—é –ø–∞–º—è—Ç–∏ )

–ù–æ –≤ –Ω—ë–º –µ—Å—Ç—å **move**-–∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∏ **move**-–ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ. –ü–æ—ç—Ç–æ–º—É –∫–æ–¥ –Ω–∏–∂–µ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç

```cpp
std::unique_ptr<String> ptr = std::make_unique<String>();
std::unique_ptr<String> ptr2 = std::move(ptr);
```
