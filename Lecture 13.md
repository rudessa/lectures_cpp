# –õ–µ–∫—Ü–∏—è 13 ‚Äî 25.02.2022. –£–∫–∞–∑–∞—Ç–µ–ª–∏ –Ω–∞ —Ñ—É–Ω–∫—Ü–∏–∏/–º–µ—Ç–æ–¥—ã. –§—É–Ω–∫—Ç–æ—Ä—ã. –õ—è–º–±–¥—ã

# Header

```cpp
#include <exception>
#include <functional>
#include <iostream>
#include <string>
#include <vector>
```

<aside>
üí° –û—Å–Ω–æ–≤–Ω–∞—è —Ü–µ–ª—å ‚Äî –Ω–∞—É—á–∏—Ç—å—Å—è –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –∫–∞—Å—Ç–æ–º–Ω—ã–π –∫–æ–¥ –≤ –¥—Ä—É–≥—É—é —á–∞—Å—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—ã, —á—Ç–æ–±—ã –æ–Ω —Ç–∞–º –∏—Å–ø–æ–ª–Ω–∏–ª—Å—è

</aside>

–§—É–Ω–∫—Ü–∏—è **ZipMap** –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –Ω–∞ –≤—Ö–æ–¥ –¥–≤–∞ –≤–µ–∫—Ç–æ—Ä–∞ —Ç–∏–ø–∞ `int`, –ø—Ä–∏–º–µ–Ω—è–µ—Ç –∫ —ç–ª–µ–º–µ–Ω—Ç–∞–º –≤–µ–∫—Ç–æ—Ä–∞ –±–∏–Ω–∞—Ä–Ω—É—é –æ–ø–µ—Ä–∞—Ü–∏—é –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∏—Ä—É—é—â–∏–π –≤–µ–∫—Ç–æ—Ä —Ç–∏–ø–∞ `int`

# ZipMap

```cpp

std::vector<int> ZipMap(const std::vector<int>& a, const std::vector<int>& b) {
    if (a.size() != b.size()) {
        throw std::invalid_argument("a.size != b.size");
    }

    std::vector<int> result;

    for (size_t i = 0; i < a.size(); ++i) {
        result.push_back(a[i] + b[i]);
    }
    
    return result;
}

int main() {
    std::vector<int> a = {1, 2, 3};
		std::vector<int> b = {10, 20, 30};
		Print(ZipMap(a, b)); // —Ñ—É–Ω–∫—Ü–∏—è Print –ø—Ä–æ—Å—Ç–æ –≤—ã–≤–æ–¥–∏—Ç –≤–µ–∫—Ç–æ—Ä
    return 0;
}
```

–í—ã–≤–æ–¥ –±—É–¥–µ—Ç —Å–ª–µ–¥—É—é—â–∏–º:

```cpp
11 22 33
```

–°–µ–π—á–∞—Å –≤ —Ñ—É–Ω–∫—Ü–∏–∏ **ZipMap** –º—ã –ø—Ä–∏–º–µ–Ω—è–µ–º –æ–¥–Ω—É –æ–ø–µ—Ä–∞—Ü–∏—é —Å–ª–æ–∂–µ–Ω–∏—è –¥–ª—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤–µ–∫—Ç–æ—Ä–æ–≤

–ú—ã —Ö–æ—Ç–∏–º –Ω–∞–ø–∏—Å–∞—Ç—å –±–æ–ª–µ–µ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª–∏—Ç –ø—Ä–∏–º–µ–Ω—è—Ç—å –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—É—é –æ–ø–µ—Ä–∞—Ü–∏—é (—Ñ—É–Ω–∫—Ü–∏—é) –∫ —ç–ª–µ–º–µ–Ω—Ç–∞–º –≤–µ–∫—Ç–æ—Ä–æ–≤

# –£–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ —Ñ—É–Ω–∫—Ü–∏–∏

–ù–∞–ø–∏—à–µ–º —Ñ—É–Ω–∫—Ü–∏—é Sum, –∫–æ—Ç–æ—Ä–∞—è —Å—É–º–º–∏—Ä—É–µ—Ç –¥–≤–∞ `int`-a

```cpp
int Sum(int a, int b) {
    return a + b;
}
```

–¢–æ–≥–¥–∞ –≤ `int main()` —Å–æ–∑–¥–∞–¥–∏–º —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ —ç—Ç—É —Ñ—É–Ω–∫—Ü–∏—é

```cpp
int main() {
    int (*func)(int, int) = Sum; // –§—É–Ω–∫—Ü–∏–∏ –Ω–µ—è–≤–Ω–æ –ø–µ—Ä–µ–≤–æ–¥—è—Ç—Å—è –≤ —É–∫–∞–∑–∞—Ç–µ–ª–∏ –Ω–∞ —Ñ—É–∫–Ω—Ü–∏–∏
		
		// –ú–æ–∂–Ω–æ –µ—â–µ —è–≤–Ω–æ –Ω–∞–ø–∏—Å–∞—Ç—å: int (*func)(int, int) = &Sum;
		
		// int - —Ç–∏–ø –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è

		//func ‚Äî –∏–º—è —É–∫–∞–∑–∞—Ç–µ–ª—è
		//* ‚Äî –∑–Ω–∞–∫ —É–∫–∞–∑–∞—Ç–µ–ª—è –Ω–∞ —Ñ—É–Ω–∫—Ü–∏—é
		//–°–∫–æ–±–∫–∏ –Ω—É–∂–Ω—ã, —á—Ç–æ–±—ã –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–∞—Å–ø–∞—Ä—Å–∏–ª —Å—Ç—Ä–æ–∫—É
		
		// (int, int) - —á–∞—Å—Ç—å —Å–∏–≥–Ω–∞—Ç—É—Ä—ã —Ñ—É–∫–Ω—Ü–∏–∏ Sum, –∫–æ—Ç–æ—Ä–∞—è –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–∏–ø—ã –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
		
		
		

		// –ø—Ä–∏–º–µ–Ω–∏–º —Ñ—É–Ω—Ü–∏—é Sum —á–µ—Ä–µ–∑ —É–∫–∞–∑–∞—Ç–µ–ª—å
		std::cout << func(1, 2) << std::endl;
    
    std::vector<int> a = {1, 2, 3};
    std::vector<int> b = {10, 20, 30};
    
    Print(ZipMap(a, b)); // —Ñ—É–Ω–∫—Ü–∏—è Print –ø—Ä–æ—Å—Ç–æ –≤—ã–≤–æ–¥–∏—Ç –≤–µ–∫—Ç–æ—Ä
    return 0;
}
```

–í—ã–≤–æ–¥:

```cpp
3
11 22 33
```

## –ò—Å–ø–æ–ª—å–∑—É–µ–º –∞–ª–∏–∞—Å —Ç–∏–ø–∞

–ß—Ç–æ–±—ã —É–ø—Ä–æ—Å—Ç–∏—Ç—å –∑–∞–ø–∏—Å—å `int (*func)(int, int)`, –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `using`(–∞–ª–∏–∞—Å —Ç–∏–ø–∞)

```cpp
using Operation = int(int, int); // —Ç–∏–ø –≤–æ–∑—Ä–∞—â–∞–µ–º–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ñ—É–Ω–∫—Ü–∏–∏
```

–¢–æ–≥–¥–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ —É–∫–∞–∑–∞—Ç–µ–ª—è –Ω–∞ —Ñ—É–Ω–∫—Ü–∏—é **`Sum`** –±—É–¥–µ—Ç –∏–º–µ—Ç—å –≤–∏–¥ 

```cpp
Operation* func = Sum;

// –∏ –º–æ–∂–Ω–æ –¥–∞–ª—å—à–µ —Å –Ω–∏–º —Ä–∞–±–æ—Ç–∞—Ç—å
std::cout << func(1, 2);
```

–ß—Ç–æ–±—ã –ø–µ—Ä–µ–¥–∞—Ç—å –≤ **ZipMap** –∫–∞—Å—Ç–æ–º–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é, –∏–∑–º–µ–Ω–∏–º –µ–µ —Å–∏–≥–Ω–∞—Ç—É—Ä—É (–∏—Ç–æ–≥–æ–≤—ã–π –∫–æ–¥)

–¢–∞–∫–∂–µ –º–æ–∂–µ–º –Ω–∞–ø–∏—Å–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é **Sub** –≤—ã—á–∏—Ç–∞–Ω–∏—è –¥–≤—É—Ö `int`-–æ–≤

```cpp
using Operation = int(int, int);

int Sum(int a, int b) {
    return a + b;
}

int Sub(int a, int b) {
    return a - b;
}

std::vector<int> ZipMap(const std::vector<int>& a, const std::vector<int>& b, Operation* operation) {
		if (a.size() != b.size()) {
        throw std::invalid_argument("a.size != b.size");
    }

    std::vector<int> result;

    for (size_t i = 0; i < a.size(); ++i) {
        result.pushback(operation(a[i], b[i]));
    }
    
    return result;
}

int main() {
	  std::vector<int> a = {1, 2, 3};
    std::vector<int> b = {10, 20, 30};
    
    Print(ZipMap(a, b, Sum)); // –ø–æ—Å–ª–µ Sum —Å–∫–æ–±–∫–∏ –Ω–µ –Ω—É–∂–Ω—ã, —Ç–∞–∫ –∫–∞–∫ —ç—Ç–æ –Ω–µ –≤—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏, –ø–µ—Ä–µ–¥–∞–µ–º –∫–∞–∫ –æ–±—ä–µ–∫—Ç
    
		Print(ZipMap(a, b, Sub));
		return 0;
}
```

–í—ã–≤–æ–¥:

```cpp
11 22 33
-9 -18 -27
```

## –ü–µ—Ä–µ–¥–∞—á–∞ –º–µ—Ç–æ–¥–∞ –∫–ª–∞—Å—Å–∞/—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –≤ —Ñ—É–Ω–∫—Ü–∏—é

–ü—É—Å—Ç—å —Ç–µ–ø–µ—Ä—å –µ—Å—Ç—å –∫–ª–∞—Å—Å/—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ **Foo**

```cpp
struct Foo {
    static int Do(int a, int b) const{
        return a * b;
    }
};
```

–ï—Å–ª–∏ –º–µ—Ç–æ–¥ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π, —Ç–æ –º–æ–∂–µ–º –≤—ã–∑–≤–∞—Ç—å **ZipMap** –∏ –ø–µ—Ä–µ–¥–∞—Ç—å –º–µ—Ç–æ–¥ ****`Foo::Do` ****–≤ –∫–∞—á–µ—Å—Ç–≤–µ –∑–Ω–∞—á–µ–Ω–∏—è —É–∫–∞–∑–∞—Ç–µ–ª—è –Ω–∞ —Ñ—É–Ω–∫—Ü–∏—é, —Ç–∞–∫ –∫–∞–∫ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –º–µ—Ç–æ–¥ ‚Äî —Ç–æ–∂–µ —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –∂–∏–≤–µ—Ç –≤–Ω—É—Ç—Ä–∏ namespace –ø–æ –∏–º–µ–Ω–∏ –∫–ª–∞—Å—Å–∞

```cpp
int main() {
	  std::vector<int> a = {1, 2, 3};
    std::vector<int> b = {10, 20, 30};
    
		Print(ZipMap(a, b, Sum)); 
		Print(ZipMap(a, b, Sub));
    Print(ZipMap(a, b, Foo::Do));
		return 0;
}
```

–í—ã–≤–æ–¥:

```cpp
11 22 33
-9 -18 -27
10 40 90
```

–ß—Ç–æ –¥–µ–ª–∞—Ç—å, –µ—Å–ª–∏ –Ω–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –º–µ—Ç–æ–¥?

```cpp
struct Foo {
    int Do(int a, int b) const {
        return a * b + x;
    }

    int x = 100;
};
```

–¢–µ–ø–µ—Ä—å –Ω–µ–ª—å–∑—è –≤—ã–∑–≤–∞—Ç—å **ZipMap** –∫–∞–∫ –≤ –ø—Ä–æ—à–ª—ã–π —Ä–∞–∑ –±–µ–∑ —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—ä–µ–∫—Ç–∞ —Ç–∏–ø–∞ **Foo**

–°–æ–∑–¥–∞–¥–∏–º –æ–±—ä–µ–∫—Ç —Ç–∏–ø–∞ **Foo** –∏ —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ –º–µ—Ç–æ–¥ `Foo::Do`

```cpp
Foo foo; // —Å–æ–∑–¥–∞–ª–∏ –æ–±—ä–µ–∫—Ç
int (Foo::*method)(int, int) = &Foo::Do; // –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø–æ —Å—Å—ã–ª–∫–µ!

// —Å–∏–Ω—Ç–∞–∫—Å–∏—Å, –ø–æ—Ö–æ–∂–∏–π, –∫–∞–∫ —É —É–∫–∞–∑–∞—Ç–µ–ª—è –Ω–∞ —Ñ—É–Ω–∫—Ü–∏—é
// method - –∏–º—è —É–∫–∞–∑–∞—Ç–µ–ª—è

// —á—Ç–æ–±—ã —Ç–µ–ø–µ—Ä—å –≤—ã–∑–≤–∞—Ç—å –º–µ—Ç–æ–¥
std::cout << foo.*method(10, 20) << std::endl;
         //—Ç–æ –∂–µ —á—Ç–æ –∏ foo.Do(10, 20) –∫–∞–∫ –±—ã —Ä–∞–∑—ã–º–µ–Ω–æ–≤–∞–ª–∏ *method
```

–ù–æ –≤—Å–µ —Ä–∞–≤–Ω–æ –ø—Ä–∏–¥–µ—Ç—Å—è –ø–∏—Å–∞—Ç—å —Ä–∞–∑–Ω—ã–µ —É–∫–∞–∑–∞—Ç–µ–ª–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤. –ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –µ—Å—Ç—å –¥–≤–∞ –∫–ª–∞—Å—Å–∞/—Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Å –º–µ—Ç–æ–¥–∞–º–∏ –ø–æ—Ö–æ–∂–∏–º–∏ –º–µ—Ç–æ–¥–∞–º–∏, —Ç–æ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –Ω—É–∂–Ω–æ –ø–∏—Å–∞—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π —É–∫–∞–∑–∞—Ç–µ–ª—å, —Ç–∞–∫ –∫–∞–∫ –≤ —Å–∏–≥–Ω–∞—Ç—É—Ä–µ —É–∫–∞–∑–∞—Ç–µ–ª—è –º—ã —É–∫–∞–∑—ã–≤–∞–µ–º, –æ—Ç–∫—É–¥–∞ –±–µ—Ä–µ—Ç—Å—è –º–µ—Ç–æ–¥

## std::mem_fn()

–ß—Ç–æ–±—ã —Ä–µ—à–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—É –ø–µ—Ä–µ–¥–∞—á–∏ –º–µ—Ç–æ–¥–∞, –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ñ—É–Ω–∫—Ü–∏—é `std::mem_fn()`

```cpp
Foo foo;
auto method = std::mem_fn(&Foo::Do); 
// —Å–æ–∑–¥–∞–µ—Ç –æ–±–µ—Ä—Ç–∫—É –≤–æ–∫—Ä—É–≥ —É–∫–∞–∑–∞—Ç–µ–ª—è –Ω–∞ –º–µ—Ç–æ–¥ Foo:Do —Å —Ç–∞–∫–æ–π –∂–µ —Å–∏–≥–Ω–∞—Ç—É—Ä–æ–π
// method - –æ–±—ä–µ–∫—Ç, –ø–æ—Ö–æ–∂–∏–π –Ω–∞ —Ñ—É–Ω–∫—Ü–∏—é, —Å —Ç—Ä–µ–º—è –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏: –æ–±—ä–µ–∫—Ç —Ç–∏–ø–∞ Foo –∏ –¥–≤—É–º—è –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –º–µ—Ç–æ–¥–∞ Foo::Do

// –≤—ã–∑–≤–∞—Ç—å –º–µ—Ç–æ–¥
std::cout << method(foo, 10, 20) << std::endl; // –ø–µ—Ä–µ–¥–∞—á–∞ foo –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø–µ—Ä–≤–æ–≥–æ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ —á–µ–º-—Ç–æ –ø–æ—Ö–æ–∂–µ –Ω–∞ —Ç–æ, –∫–∞–∫ –≤ Python –ø–µ—Ä–µ–¥–∞–µ–º self
```

–ò –≤—Å–µ —Ä–∞–≤–Ω–æ –ø—Ä–æ–±–ª–µ–º–∞ –æ—Å—Ç–∞–ª–∞—Å—å

## std::bind()

–ò—Å–ø–æ–ª—å–∑—É–µ–º `using namespace std::placeholders;`

```cpp
 using namespace std::placeholders;

int main() {

	Foo foo;
	auto method = std::mem_fn(&Foo::Do); 
	std::cout << method(foo, 10, 20) << std::endl;

	auto method2 = std::bind(&Foo::Do, &foo, _1, _2);
	// —Å–æ–∑–¥–∞–µ—Ç –æ–±—ä–µ–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π —Ö—Ä–∞–Ω–∏—Ç —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ Foo:Do, —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ foo
	// _1, _2 - –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, –≤ –∫–æ—Ç–æ—Ä—ã–µ –≤—Å—Ç–∞–≤–ª—è—é—Ç—Å—è –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –º–µ—Ç–æ–¥–∞ Foo::Do - placeholder-—ã
	// —Ç–æ –µ—Å—Ç—å _1 = –ø–µ—Ä–≤—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä Foo::Do, _2 = –≤—Ç–æ—Ä–æ–π –ø–∞—Ä–∞–º–µ—Ç—Ä Foo::Do (–∫–æ–ø–∏—Ä—É—é—Ç—Å—è –ø–æ –∑–Ω–∞—á–µ–Ω–∏—é)

	// foo –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å –∏ –ø–æ –∑–Ω–∞—á–µ–Ω–∏—é, –Ω–æ —Ç–æ–≥–¥–∞ –æ–Ω —Å–∫–æ–ø–∏—Ä—É–µ—Ç—Å—è

	// –≤—ã–∑–æ–≤ method2
	std::cout << method2(100, 200) << std::endl;
	return 0;

}
```

–í—ã–≤–æ–¥:

```cpp
2100
```

–ü–æ–º–µ–Ω—è–µ–º –º–µ—Å—Ç–∞–º–∏ placeholder-—ã 

–¢–∞–∫ –∫–∞–∫ –æ–ø–µ—Ä–∞—Ü–∏—è –≤ `Foo::Do` —Å–∏–º–º–µ—Ç—Ä–∏—á–Ω–∞—è, —Ç–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –Ω–µ –∏–∑–º–µ–Ω–∏—Ç—Å—è. –ü–æ–º–µ–Ω—è–µ–º –µ–µ

```cpp
struct Foo {
    int Do(int a, int b) const {
        return a - b + x;
    }

    int x = 100;
};
```

```cpp
...
auto method2 = std::bind(&Foo::Do, foo, _2, _1);
std::cout << method2(100, 200) << std::endl;
// 100 -> –≤—Ç–æ—Ä–æ–π –ø–∞—Ä–∞–º–µ—Ç—Ä Foo::Do, 200 -> –ø–µ—Ä–≤—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä Foo::Do
```

–í—ã–≤–æ–¥:

```cpp
2100
```

–£–±–µ—Ä–µ–º –æ–¥–∏–Ω placeholder

```cpp
...
auto method2 = std::bind(&Foo::Do, foo, 1000, _1); // —Ç–µ–ø–µ—Ä—å —ç—Ç–æ –æ–±—ä–µ–∫—Ç —Å –æ–¥–Ω–∏–º –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º
std::cout << method2(10000) << std::endl;
// 1000 -> –ø–µ—Ä–≤—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä Foo::Do, 10.000 -> –≤—Ç–æ—Ä–æ–π –ø–∞—Ä–∞–º–µ—Ç—Ä Foo::Do
```

–í—ã–≤–æ–¥:

```cpp
-8900
```

–ò–ª–∏ 

```cpp
...
auto method2 = std::bind(&Foo::Do, foo, _1, 1000); // —Ç–µ–ø–µ—Ä—å —ç—Ç–æ –æ–±—ä–µ–∫—Ç —Å –æ–¥–Ω–∏–º –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º
std::cout << method2(10000) << std::endl;
// 10.000 -> –ø–µ—Ä–≤—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä Foo::Do, 1000 -> –≤—Ç–æ—Ä–æ–π –ø–∞—Ä–∞–º–µ—Ç—Ä Foo::Do
```

–í—ã–≤–æ–¥:

```cpp
9100
```

–®—Ç—É–∫–∞ –¥–æ–≤–æ–ª—å–Ω–æ —Ö—Ä—É–ø–∫–∞—è, —Ç–∞–∫ –∫–∞–∫ –Ω—É–∂–Ω–æ –ø–æ–º–Ω–∏—Ç—å, –≤ –∫–∞–∫–æ–º –ø–æ—Ä—è–¥–∫–µ —É–∫–∞–∑–∞–ª–∏ placeholder-—ã, –ø–µ—Ä–µ—á–∏—Å–ª–∏—Ç—å –∏—Ö –ø–æ –ø–æ—Ä—è–¥–∫—É

### –§—É–Ω–∫—Ç–æ—Ä—ã. –û–±—ä–µ–∫—Ç, –ø–æ—Ö–æ–∂–∏–π –Ω–∞ —Ñ—É–Ω–∫—Ü–∏—é

`std::mem_fn()` –∏ `std::bind()` –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –æ–±—ä–µ–∫—Ç—ã, –ø–æ—Ö–æ–∂–∏–µ –Ω–∞ —Ñ—É–Ω–∫—Ü–∏—é. –ß—Ç–æ —ç—Ç–æ —Ç–∞–∫–æ–µ?

–ù–∞ —Å–∞–º–æ–º –¥–µ–ª–µ, —ç—Ç–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –∫–ª–∞—Å—Å —Å –ø–µ—Ä–µ–≥—Ä—É–∂–µ–Ω–Ω—ã–º –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–º `**()`** —Å —Å–∏–≥–Ω–∞—Ç—É—Ä–æ–π –∫–∞–∫ —É –º–µ—Ç–æ–¥–∞, —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ –∫–æ—Ç–æ—Ä—ã–π –±—ã–ª –ø–µ—Ä–µ–¥–∞–Ω –ø–µ—Ä–≤—ã–º –∞—Ä–≥—É–º–µ–Ω—Ç–æ–º

–ò –ø–æ—ç—Ç–æ–º—É —É–∫–∞–∑—ã–≤–∞–µ–º —Ç–∏–ø `auto` —á—Ç–æ–±—ã –º–Ω–æ–≥–æ –Ω–µ –¥—É–º–∞—Ç—å, —á—Ç–æ —ç—Ç–æ –∑–∞ —Ç–∏–ø 

```cpp
//–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–∞–ø–∏—à–µ–º –∫–ª–∞—Å—Å Division
class Division {
public:
    int operator()(int a, int b) const {
        return a / b;
    }
};

int main() {

   Division div;
   std::cout << div(100, 25) << std::endl;
   return 0;
}
```

–í—ã–≤–æ–¥:

```cpp
4
```

–ï—Å–ª–∏ —É–±–µ—Ä–µ–º –∫–∞–∫–∏–µ-—Ç–æ placeholder-—ã, —Ç–æ —ç—Ç–æ –æ—Ç—Ä–∞–∑–∏—Ç—Å—è –∏ –Ω–∞ —Å–∏–≥–Ω–∞—Ç—É—Ä–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ `()`

```cpp
auto method2 = std::bind(&Foo::Do, foo, _1, 1000); <=> int operator(int a) const {
																													return a * 1000 // * -- –±–∏–Ω–∞—Ä–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è
																												}
```

## std::function<>

`std::function` –ª–µ–∂–∏—Ç –≤ `#include <functional>` . –ò—Å–ø–æ–ª—å–∑—É—é—Ç —Å –°++ 11

–£ –Ω–µ–≥–æ –æ–¥–∏–Ω —à–∞–±–ª–æ–Ω–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä ‚Äî —Ç–∏–ø —Ñ—É–Ω–∫—Ü–∏–∏. –ù–∞–ø—Ä–∏–º–µ—Ä, `int(int, int)`

–£ –Ω–µ–≥–æ –µ—Å—Ç—å –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏ –¥–ª—è –≤—Å–µ–≥–æ, —á—Ç–æ –ø–æ—Ö–æ–∂–µ –Ω–∞ —Ñ—É–Ω–∫—Ü–∏—é. –ú–æ–∂–µ–º –ø–µ—Ä–µ–¥–∞—Ç—å –∏ —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ —Ñ—É–Ω–∫—Ü–∏—é, –∏ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –º–µ—Ç–æ–¥, —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞–±–æ—Ç—ã `std::bind`, `std::mem_fn`, –Ω–∞—à –∫–ª–∞—Å—Å —Å –ø–µ—Ä–µ–≥—Ä—É–∂–µ–Ω–Ω—ã–º –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–º `**()**`

```cpp
std::function<int(int, int)> op = Sum; // —Ö—Ä–∞–Ω–∏—Ç –≤ —Å–µ–±–µ –≤—Å–µ –ø–æ—Ö–æ–∂–µ–µ –Ω–∞ —Ñ—É–Ω–∫—Ü–∏—é —Å —Ç–∞–∫–æ–π —Å–∏–≥–Ω–∞—Ç—É—Ä–æ–π
std::function<int(int, int)> op = method2; // method2 - std::bind —Å –¥–≤—É–º—è placeholders
std::function<Operation> op = div; // div - –æ–±—ä–µ–∫—Ç –∫–ª–∞—Å—Å–∞ Division, Operation - –∞–ª—å—èc = int(int, int)

// –µ—Å–ª–∏ –≤—ã–∑–≤–∞—Ç—å –ø—É—Å—Ç–æ–π std::function, —Ç–æ –≤—ã–±—Ä–æ—Å–∏—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ bad_function call
```

–¢–µ–ø–µ—Ä—å –∫–∞–∫ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å `std::function` –≤ **ZipMap** (–º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –ø–æ –∑–Ω–∞—á–µ–Ω–∏—é, —Ç–∞–∫ –∫–∞–∫ –æ–Ω –Ω–µ–±–æ–ª—å—à–æ–π)

```cpp
std::vector<int> ZipMap(const std::vector<int>& a, const std::vector<int>& b, std::function<Operation> operation) {
    if (a.size() != b.size()) {
        throw std::invalid_argument("a.size != b.size");
    }

    std::vector<int> result;

    for (size_t i = 0; i < a.size(); ++i) {
        if (operation) { // –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø—É—Å—Ç–æ—Ç—É –æ–ø–µ—Ä–∞—Ü–∏–∏. –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω –æ–ø–µ—Ä–∞—Ç–æ—Ä bool. true - –ø–µ—Ä–µ–¥–∞–ª–∏ —Ñ—É–Ω–∫—Ü–∏—é, –∏–Ω–∞—á–µ false
            result.push_back(operation(a[i], b[i]));
        }
    }

    return result;
}

int main() {

	  Print(ZipMap(a, b, Sum)); 
		Print(ZipMap(a, b, Sub));
   return 0;
}

```

–ú–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –ø–æ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–Ω–æ–π —Å—Å—ã–ª–∫–µ. –ò –¥–∞–∂–µ –Ω–µ–∫–æ–Ω—Å—Ç–∞–Ω—Ç–Ω—ã–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã –≤—Å–µ —Ä–∞–≤–Ω–æ –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å 

### lambda

–ü–µ—Ä–µ–ø–∏—à–µ–º –∫–ª–∞—Å—Å Division –Ω–∞ lambda function

```cpp
auto div = [](int a, int b) { return a / b; }; // –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –∫–æ–¥, —á—Ç–æ –∏  –∫–ª–∞—Å—Å Division
             // –ß–∞—Å—Ç—å —Å–∏–≥–Ω–∞—Ç—É—Ä—ã —Ñ—É–Ω–∫—Ü–∏–∏. –ù–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–≥–æ —Ç–∏–ø–∞, —Ç–∞–∫ –∫–∞–∫ –≤—ã–≤–æ–¥–∏—Ç—Å—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏–∑ return

// –∫–æ–ø–∏–ª—è—Ç–æ—Ä —Å–æ–∑–¥–∞—Å—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π —Ç–∏–ø –¥–ª—è –∫–∞–∂–¥–æ–π lambda (–¥–∞–∂–µ –µ—Å–ª–∏ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ)
// —ç—Ç–æ –±—É–¥–µ—Ç –∫–ª–∞—Å—Å —Å –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–º (), –ø—Ä–∏–Ω–∏–º–∞—é—â–∏–π –¥–≤–∞ int
std::cout << div(100, 25) << std::end
```

–ü—É—Å—Ç—å —É –Ω–∞—Å –µ—Å—Ç—å –µ—â–µ –ø–∞—Ä–∞–º–µ—Ç—Ä `x`

```cpp
// –ª—è–º–±–¥–∞ —Ñ—É–Ω–∫—Ü–∏—è –∑–∞—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –ª–æ–∫–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤–Ω—É—Ç—Ä–∏ —Å–∫–æ–±–æ–∫, –≤ –∫–æ—Ç–æ—Ä—ã—Ö –æ–Ω–∞ –æ–±—ä—è–≤–ª–µ–Ω–∞
int x = 100;
auto div = [x](int a, int b) { return a / b + x; }; 

// —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏ –≤ –∫–ª–∞—Å—Å–µ Division —Å–æ–∑–¥–∞–µ—Ç—Å—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é const –ø—Ä–∏–≤–∞—Ç–Ω–æ–µ –ø–æ–ª–µ —Ç–∏–ø–∞, –∫–∞–∫ —É —Ö, –∏ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä

class Division {
public:
		Division(int x){
			this->x = x;
		}
    int operator()(int a, int b) const {
        return a / b;
    }

private:
		const int x;
};

// x —Å–∫–æ–ø–∏—Ä—É–µ—Ç—Å—è –≤ —ç—Ç–æ –ø—Ä–∏–≤–∞—Ç–Ω–æ–µ –ø–æ–ª–µ –∏ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –≤–Ω—É—Ç—Ä–∏ —Ç–µ–ª–∞ lam
```

```cpp

auto div = [x_ = x](int a, int b) { return a / b + x_; }; // –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–ª–∏ x –Ω–∞ x_. –≤ –∫–ª–∞—Å—Å–µ –ø–æ–ª–µ –±—É–¥–µ—Ç –∏–º–µ—Ç—å –∏–º—è x_

auto div = [&x](int a, int b) { return a / b + x; }; // –ø–µ—Ä–µ–¥–∞—á–∞ –ø–æ —Å—Å—ã–ª–∫–µ. –≤ –∫–ª–∞—Å—Å–µ –±—É–¥–µ—Ç –ø–æ–ª–µ int& –∏ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä Divison(int& _x) : x(_x) {}

auto div = [&foo, x](int a, int b) { return foo.Do(a, b) + x; }; // —Ç–æ –∂–µ —Å–∞–º–æ–µ, —á—Ç–æ –∏ std::bind, –Ω–æ –±–æ–ª–µ–µ —á–∏—Ç–∞–µ–º–æ
// –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ x, –ø–µ—Ä–µ–¥–∞—á–∞ –ø–æ —Å—Å—ã–ª–∫–µ foo

auto div = [&](int a, int b) { return foo.Do(a, b) + x; };
// –≤—Å–µ –ª–æ–∫–∞–ª—å–Ω—ã–µ –ø—Ä–µ–º–µ–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º –≤–Ω—É—Ç—Ä–∏ —Ç–µ–ª–∞ lambda, (foo, x) –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –ø–æ —Å—Å—ã–ª–∫–µ

auto div = [=](int a, int b) mutable { return foo.Do(a, b) + x; };
// foo, x –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –ø–æ –∑–Ω–∞—á–µ–Ω–∏—é
// mutable —Å–æ–∑–¥–∞–µ—Ç –∫–ª–∞—Å—Å —Å –Ω–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–Ω—ã–º–∏ –ø—Ä–∏–≤–∞—Ç–Ω—ã–º–∏ –ø–æ–ª—è–º–∏ foo, x

auto div = [=, &foo](int a, int b) mutable { return foo.Do(a, b) + x; };
// –≤—Å–µ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –ø–æ –∑–Ω–∞—á–µ–Ω–∏—é, foo - –ø–æ —Å—Å—ã–ª–∫–µ
```

–ü—É—Å—Ç—å —Ö–æ—Ç–∏–º –ø–µ—Ä–µ–ø–∏—Å–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É `Foo::Do` —á–µ—Ä–µ–∑ lambda function

```cpp
struct Foo {
    int Div(int a, int b) const {
        return a / b;
    }
    int Do(int a, int b) const {
        auto div = [](int a, int b) { return Div(a, b) ;};
				return div(a, b);
    }

    int x = 100;
};

// —Ç–∞–∫–æ–π –∫–æ–¥ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç, —Ç–∞–∫ –∫–∞–∫ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å this 
// –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å —è–≤–Ω–æ –ø–æ —Å—Å—ã–ª–∫–µ, –º–æ–∂–Ω–æ –ø–æ –∑–Ω–∞—á–µ–Ω–∏—é (–≤—Å–µ —Ä–∞–≤–Ω–æ –∑–∞—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç—Å—è –ø–æ —Å—Å—ã–ª–∫–µ)

struct Foo {
    int Div(int a, int b) const {
        return a / b;
    }
    int Do(int a, int b) const {
        auto div = [&](int a, int b) { return this->Div(a, b) ;};
				// –ª–∏–±–æ auto div = [&](int a, int b) { return this->Div(a, b) ;};
				// –ª–∏–±–æ auto div = [this](int a, int b) { return this->Div(a, b) ;};
				// —Å–ª–µ–¥—É—é—â–∏–π —Å–ø–æ—Å–æ–± –∑–∞–ø—Ä–µ—â–µ–Ω —Å 20 —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞
				// auto div = [=](int a, int b) { return this->Div(a, b) ;};

				return div(a, b);
    }

    int x = 100;
};
```

–ï—Å–ª–∏ —Ö–æ—Ç–∏–º, —á—Ç–æ–±—ã –ª—è–º–±–¥–∞ —Ñ—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–ª–∞ –æ–±—ä–µ–∫—Ç –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ —Ç–∏–ø–∞, —Ç–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `double`)

```cpp
auto div = [](int a, int b) ->double { return Div(a, b) ;};
```

–ï—Å–ª–∏ –≤ –ª—è–º–±–¥–∞ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –±—É–¥—É—Ç –∏–º–µ—Ç—å —Ç–∏–ø `auto` ‚Äî generic lambda

```cpp
auto div = [](auto a, auto b) ->double { return Div(a, b) ;};

// —ç—Ç–æ—Ç –∫–æ–¥ —Ä–∞–≤–Ω–æ—Å–∏–ª–µ–Ω —à–∞–±–ª–æ–Ω–Ω–æ–º—É –æ–ø–µ—Ä–∞—Ç–æ—Ä—É () 
class Division {
public:
    template<typename T1, typename T2>
    auto operator()(T1 a, T2 b) {
        return a / b;
    }
};

```

## –®–∞–±–ª–æ–Ω–Ω–∞—è ZipMap

–®–∞–±–ª–æ–Ω–Ω—ã–º –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º –±—É–¥–µ—Ç –±–∏–Ω–∞—Ä–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è –∏ —Ç–∏–ø –≤–µ–∫—Ç–æ—Ä–æ–≤

```cpp
template<typename Op, typename T>
auto ZipMap(const std::vector<T>& a, const std::vector<T>& b) {
    if (a.size() != b.size()) {
        throw std::invalid_argument("a.size != b.size");
    }

    Op op;
    std::vector<decltype(op(a[0], b[0]))> result; 
		// decltype –Ω—É–∂–Ω–æ, —á—Ç–æ–±—ã –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ç–∏–ø –≤–µ–∫—Ç–æ—Ä–∞
		// –ø—Ä–∏ —ç—Ç–æ–º –Ω–∏–∫–∞–∫–æ–π –æ–ø–µ—Ä–∞—Ç–æ—Ä –Ω–µ –±—É–¥–µ—Ç —Ä–µ–∞–ª—å–Ω–æ –≤—ã–∑—ã–≤–∞—Ç—å—Å—è

    for (size_t i = 0; i < a.size(); ++i) {
        result.push_back(op(a[i], b[i]));
    }

    return result;
}

class Division {
public:
    template<typename T1, typename T2>
    auto operator()(T1 a, T2 b) {
        return a / b;
    }
};

// —Ç–æ–≥–¥–∞ ZipMap –º–æ–∂–Ω–æ –±—É–¥–µ—Ç –≤—ã–∑–≤–∞—Ç—å 
Print(ZipMap<Division> (a, b));

int main() {
		std::vector<int> a = {1, 2, 3};
    std::vector<int> b = {10, 20, 30};
   // —Ç–æ–≥–¥–∞ ZipMap –º–æ–∂–Ω–æ –±—É–¥–µ—Ç –≤—ã–∑–≤–∞—Ç—å 
   Print(ZipMap<Division> (a, b));
   return 0;
}
```
